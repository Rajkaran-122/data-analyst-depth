<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataFlow AI - Professional Analytics Agent</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="./styles/output.css">
    <style>
        /* Glassomorphic effects and animations */
        @supports (backdrop-filter: blur(10px)) {
            .glass-effect {
                background: rgba(15, 23, 42, 0.7);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
            .glass-effect-sm {
                background: rgba(15, 23, 42, 0.5);
                backdrop-filter: blur(6px);
                -webkit-backdrop-filter: blur(6px);
                border: 1px solid rgba(255, 255, 255, 0.08);
            }
        }
        
        @keyframes slideInLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutLeft {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(-100%);
                opacity: 0;
            }
        }
        
        .sidebar-open {
            animation: slideInLeft 0.3s ease-out;
        }
        
        .sidebar-close {
            animation: slideOutLeft 0.3s ease-out;
        }
        
        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            z-index: 30;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        .sidebar-overlay.hidden {
            animation: fadeOut 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-background text-foreground dark">
    <!-- Loading indicator -->
    <div id="loadingIndicator" class="fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50 hidden">
        <div class="flex flex-col items-center gap-4">
            <div class="w-12 h-12 border-4 border-accent/30 border-t-accent rounded-full animate-spin-slow"></div>
            <p class="text-sm text-muted-foreground">Initializing DataFlow...</p>
        </div>
    </div>

    <!-- Sidebar overlay for mobile -->
    <div id="sidebarOverlay" class="sidebar-overlay hidden md:hidden"></div>

    <div class="flex h-screen bg-background overflow-hidden">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-64 glass-effect border-r border-border flex flex-col transition-all duration-300 fixed md:relative md:translate-x-0 h-full md:h-auto z-40 -translate-x-full md:translate-x-0 md:flex">
            <!-- Sidebar close button (mobile) -->
            <button id="sidebarClose" class="md:hidden absolute top-4 right-4 p-2 rounded-lg hover:bg-accent/10 transition-all text-muted-foreground hover:text-foreground z-50">
                <i class="fas fa-times text-xl"></i>
            </button>

            <!-- Logo -->
            <div class="p-6 border-b border-border/20">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-accent flex items-center justify-center shadow-lg hover:shadow-accent/50 transition-all">
                        <i class="fas fa-chart-line text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">DataFlow</h1>
                        <p class="text-xs text-muted-foreground">AI Analytics</p>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 overflow-y-auto p-4 space-y-2">
                <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg glass-effect-sm text-accent font-medium transition-all hover:glass-effect">
                    <i class="fas fa-home w-5"></i>
                    <span class="hidden sm:inline">Dashboard</span>
                </a>
                <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-muted-foreground hover:glass-effect-sm transition-all">
                    <i class="fas fa-cloud-arrow-up w-5"></i>
                    <span class="hidden sm:inline">Upload</span>
                </a>
                <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-muted-foreground hover:glass-effect-sm transition-all">
                    <i class="fas fa-history w-5"></i>
                    <span class="hidden sm:inline">History</span>
                </a>
                <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-muted-foreground hover:glass-effect-sm transition-all">
                    <i class="fas fa-sliders w-5"></i>
                    <span class="hidden sm:inline">Settings</span>
                </a>
            </nav>

            <!-- Status indicator -->
            <div class="p-4 border-t border-border/20">
                <div class="flex items-center gap-2 p-3 rounded-lg glass-effect-sm">
                    <div id="statusDot" class="w-2 h-2 rounded-full bg-destructive animate-pulse"></div>
                    <span id="statusText" class="text-xs text-muted-foreground hidden sm:inline">Connecting...</span>
                </div>
            </div>
        </aside>

        <!-- Mobile sidebar toggle -->
        <button id="sidebarToggle" class="md:hidden fixed top-4 left-4 z-40 p-3 rounded-lg glass-effect-sm hover:glass-effect transition-all">
            <i class="fas fa-bars text-lg"></i>
        </button>

        <!-- Main content -->
        <main class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="glass-effect-sm p-4 md:p-6 border-b border-border/20">
                <div class="flex items-center justify-between gap-4">
                    <div class="flex-1">
                        <h2 class="text-xl md:text-2xl font-bold text-foreground">Analytics Dashboard</h2>
                        <p class="text-xs md:text-sm text-muted-foreground mt-1">Upload your data and ask AI for insights</p>
                    </div>
                    <div class="flex items-center gap-2">
                        <button class="p-2 rounded-lg hover:glass-effect-sm transition-all" title="Search">
                            <i class="fas fa-search text-muted-foreground hover:text-accent transition-all"></i>
                        </button>
                        <button class="p-2 rounded-lg hover:glass-effect-sm transition-all" title="Notifications">
                            <i class="fas fa-bell text-muted-foreground hover:text-accent transition-all"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Content area -->
            <div class="flex-1 overflow-y-auto">
                <div class="max-w-7xl mx-auto p-3 md:p-6 space-y-4 md:space-y-6">
                    <!-- Welcome section / Chat area -->
                    <div id="chatContainer" class="flex flex-col gap-4 h-full">
                        <!-- Messages area -->
                        <div id="messagesArea" class="flex-1 overflow-y-auto mb-4 space-y-4">
                            <!-- Welcome message -->
                            <div class="flex justify-center">
                                <div class="rounded-lg glass-effect p-6 text-center max-w-md animate-fade-in">
                                    <div class="w-16 h-16 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center mx-auto mb-4 animate-float shadow-lg">
                                        <i class="fas fa-sparkles text-white text-2xl"></i>
                                    </div>
                                    <h3 class="text-lg md:text-xl font-bold bg-gradient-to-r from-primary via-accent to-secondary bg-clip-text text-transparent mb-2">Welcome to DataFlow</h3>
                                    <p class="text-xs md:text-sm text-muted-foreground">Upload your data and ask AI to analyze it. Get insights, charts, and summaries instantly.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Quick actions -->
                        <div id="quickActions" class="grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 mb-4">
                            <button class="quick-action-btn flex flex-col items-center gap-2 p-3 md:p-4 rounded-lg glass-effect-sm hover:glass-effect transition-all group">
                                <i class="fas fa-chart-bar text-muted-foreground group-hover:text-accent text-lg md:text-xl transition-all"></i>
                                <span class="text-xs font-medium">Summary</span>
                            </button>
                            <button class="quick-action-btn flex flex-col items-center gap-2 p-3 md:p-4 rounded-lg glass-effect-sm hover:glass-effect transition-all group">
                                <i class="fas fa-chart-pie text-muted-foreground group-hover:text-accent text-lg md:text-xl transition-all"></i>
                                <span class="text-xs font-medium">Stats</span>
                            </button>
                            <button class="quick-action-btn flex flex-col items-center gap-2 p-3 md:p-4 rounded-lg glass-effect-sm hover:glass-effect transition-all group">
                                <i class="fas fa-image text-muted-foreground group-hover:text-accent text-lg md:text-xl transition-all"></i>
                                <span class="text-xs font-medium">Visualize</span>
                            </button>
                            <button class="quick-action-btn flex flex-col items-center gap-2 p-3 md:p-4 rounded-lg glass-effect-sm hover:glass-effect transition-all group">
                                <i class="fas fa-lightbulb text-muted-foreground group-hover:text-accent text-lg md:text-xl transition-all"></i>
                                <span class="text-xs font-medium">Insights</span>
                            </button>
                        </div>

                        <!-- Upload area / Input section -->
                        <div class="space-y-3 md:space-y-4">
                            <!-- File upload -->
                            <div id="uploadArea" class="relative rounded-lg border-2 border-dashed border-accent/30 hover:border-accent transition-all p-6 md:p-8 text-center glass-effect-sm hover:glass-effect cursor-pointer group">
                                <div class="pointer-events-none">
                                    <i class="fas fa-cloud-arrow-up text-3xl md:text-4xl text-accent/40 group-hover:text-accent/60 transition-all mb-3 block"></i>
                                    <h4 class="font-semibold text-sm md:text-base text-foreground mb-1">Drop your data here</h4>
                                    <p class="text-xs md:text-sm text-muted-foreground">Supports CSV, XLSX, JSON (up to 50MB)</p>
                                </div>
                                <input type="file" id="fileInput" accept=".csv,.xlsx,.xls,.json" multiple class="absolute inset-0 cursor-pointer opacity-0">
                            </div>

                            <!-- Message input -->
                            <div class="flex flex-col md:flex-row gap-2 md:gap-3">
                                <textarea 
                                    id="messageInput" 
                                    placeholder="Ask me anything about your data..." 
                                    class="rounded-lg glass-effect-sm px-4 py-2 placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-accent/50 flex-1 min-h-[80px] md:min-h-[100px] max-h-[200px] resize-none"
                                    rows="3">
                                </textarea>
                                <button id="sendBtn" class="inline-flex items-center justify-center rounded-lg px-4 md:px-6 py-2 md:py-3 font-medium transition-all duration-200 ease-in-out bg-gradient-to-r from-primary to-accent text-primary-foreground hover:shadow-lg hover:shadow-accent/50 active:scale-95 self-end md:self-auto">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Right sidebar: Recent queries & stats -->
        <aside class="hidden lg:flex w-64 glass-effect border-l border-border/20 flex-col p-4 overflow-y-auto">
            <!-- Recent queries -->
            <div class="mb-6">
                <h3 class="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                    <i class="fas fa-history text-accent"></i>
                    Recent Queries
                </h3>
                <div id="recentQueriesList" class="space-y-2">
                    <p class="text-xs text-muted-foreground">No queries yet</p>
                </div>
            </div>

            <!-- Statistics -->
            <div class="mb-6">
                <h3 class="text-sm font-semibold text-foreground mb-3 flex items-center gap-2">
                    <i class="fas fa-chart-line text-accent"></i>
                    Statistics
                </h3>
                <div id="statsContainer" class="space-y-3">
                    <div class="p-3 rounded-lg glass-effect-sm">
                        <p class="text-xs text-muted-foreground">Files uploaded</p>
                        <p id="statsFiles" class="text-2xl font-bold text-transparent bg-gradient-to-r from-primary to-accent bg-clip-text">0</p>
                    </div>
                    <div class="p-3 rounded-lg glass-effect-sm">
                        <p class="text-xs text-muted-foreground">Queries made</p>
                        <p id="statsQueries" class="text-2xl font-bold text-transparent bg-gradient-to-r from-primary to-accent bg-clip-text">0</p>
                    </div>
                </div>
            </div>

            <!-- Tips -->
            <div class="text-xs text-muted-foreground space-y-2">
                <h3 class="font-semibold text-foreground mb-3 flex items-center gap-2">
                    <i class="fas fa-lightbulb text-accent"></i>
                    Tips
                </h3>
                <p>ðŸ“Š Upload CSV or XLSX files for best results</p>
                <p>ðŸ’¡ Be specific with your questions</p>
                <p>ðŸ“ˆ Ask for trends, patterns, or anomalies</p>
            </div>
        </aside>
    </div>

    <!-- Toast notifications -->
    <div id="toast" class="fixed bottom-4 right-4 glass-effect rounded-lg shadow-lg p-4 max-w-sm animate-slide-in-right hidden z-50">
        <div class="flex items-start gap-3">
            <i id="toastIcon" class="fas fa-circle-check text-green-500 mt-0.5"></i>
            <div>
                <p id="toastMessage" class="text-sm font-medium"></p>
            </div>
            <button class="ml-auto text-muted-foreground hover:text-foreground">
                <i class="fas fa-xmark"></i>
            </button>
        </div>
    </div>

    <!-- Modal for analysis results -->
    <div id="resultModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 hidden p-4 animate-fade-in">
        <div class="glass-effect rounded-lg border border-border/20 max-w-2xl w-full max-h-[80vh] overflow-y-auto animate-scale-in">
            <div class="sticky top-0 glass-effect border-b border-border/20 p-4 md:p-6 flex items-center justify-between">
                <h2 class="text-lg md:text-xl font-bold text-foreground">Analysis Results</h2>
                <button id="closeModal" class="text-muted-foreground hover:text-foreground">
                    <i class="fas fa-xmark text-xl"></i>
                </button>
            </div>
            <div id="modalContent" class="p-4 md:p-6">
                <div class="animate-pulse space-y-3">
                    <div class="h-4 bg-muted/30 rounded"></div>
                    <div class="h-4 bg-muted/30 rounded"></div>
                    <div class="h-4 bg-muted/30 rounded w-5/6"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="./app.js"></script>
</body>
</html>
